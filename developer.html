<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fold DB — Developer</title>
  <meta name="description" content="Fold DB developer documentation — architecture, code examples, CLI reference, and live schema registry." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<div class="page">

<nav style="display:flex;align-items:center;gap:10px;padding:6px 0;margin-bottom:12px;">
  <canvas id="logo" style="display:block;"></canvas>
  <a href="index.html" style="color:#ebdbb2;text-decoration:none;font-weight:700;font-size:16px;letter-spacing:1px;">FoldDB</a>
  <span style="flex:1"></span>
  <a href="index.html" class="link-btn">[Home]</a>
  <a href="guide.html" class="link-btn">[Guide]</a>
  <a href="https://github.com/shiba4life/fold_db" target="_blank" class="link-btn">[GitHub]</a>
</nav>

<p><a href="index.html" class="link-btn">[&larr; Home]</a></p>

<pre class="ascii">
####  ##### #   #
#   # #     #   #
#   # ###   #   #
#   # #      # #
####  #####   #
</pre>

<h1 class="tagline">Developer Guide</h1>

<p>FoldDB is a personal database that uses AI to automatically organize your data. Drop in files, JSON, or social media exports &mdash; FoldDB detects schemas, extracts searchable keywords, and lets you query with natural language.</p>

<p class="dim">----------------------------------------------------------------------------------------------------------------------------------------</p>

<!-- QUICK START -->
<div class="section-amber">
<h2 id="quickstart"><span class="bold">QUICK START</span> <span class="dim">Up and running in 5 minutes</span></h2>

<div style="display:flex;flex-direction:column;gap:1em;margin:1em 0;">
<div class="card"><p><span class="label label-yellow">1. INSTALL</span></p>
<pre>curl -fsSL https://raw.githubusercontent.com/shiba4life/fold_db/master/install.sh | sh</pre>
<p class="dim">Auto-detects macOS (Apple Silicon / Intel) and Linux x86_64</p>
<p>Or from source:</p>
<pre>cargo install --git https://github.com/shiba4life/fold_db.git --bin folddb</pre></div>

<div class="card"><p><span class="label label-yellow">2. CONFIGURE</span></p>
<pre>export FOLD_OPENROUTER_API_KEY="sk-..."</pre>
<p class="dim">Required for AI-powered ingestion and natural language queries</p></div>

<div class="card"><p><span class="label label-yellow">3. RUN</span></p>
<pre>./run.sh --local</pre>
<p class="dim">Web UI at localhost:5173 &middot; Backend API at localhost:9001</p>
<pre>./run.sh --local --local-schema  # Fully offline
./run.sh --local --empty-db      # Fresh database
./run.sh --local --dev           # Dev schema service</pre></div>

<div class="card"><p><span class="label label-yellow">4. INGEST SAMPLE DATA</span></p>
<pre>curl -s -X POST http://localhost:9001/api/ingestion/process \
  -H "Content-Type: application/json" \
  -d '{
    "data": {
      "name": "John Doe",
      "email": "john@example.com",
      "role": "engineer",
      "joined": "2024-03-15"
    }
  }' | jq .</pre>
<p class="dim">AI detects the schema, creates it if needed, writes the data, and indexes keywords</p></div>

<div class="card"><p><span class="label label-yellow">5. QUERY IT BACK</span></p>
<pre>curl -s -X POST http://localhost:9001/api/query \
  -H "Content-Type: application/json" \
  -d '{
    "schema_name": "person_profile",
    "fields": ["name", "email", "role"]
  }' | jq .</pre>
<p class="dim">Use the schema name from step 4's response</p></div>

<div class="card"><p><span class="label label-yellow">6. SEARCH THE INDEX</span></p>
<pre>curl -s "http://localhost:9001/api/native-index/search?term=john" | jq .</pre>
<p class="dim">Returns all indexed entries matching the search term</p></div>
</div>
</div>

<!-- HOW IT WORKS -->
<div class="section-slate">
<h2 id="architecture"><span class="bold">HOW IT WORKS</span> <span class="dim">The ingestion-to-query pipeline</span></h2>

<pre class="compare-table">
Files / JSON / APIs
       |
       v
  AI Ingestion -----> Schema Service (detects or creates schema)
       |
       v
  Mutation ----------> Storage (Sled local or DynamoDB cloud)
       |
       v
  Keyword Indexing --> AI extracts and normalizes searchable terms
       |
       v
  Query -------------> Natural language or structured field queries
</pre>

<div class="grid-3">
<div class="card"><p><span class="label label-blue">INGEST</span></p><p>
Send data in any format. AI analyzes the structure and maps it to a schema automatically.</p></div>

<div class="card"><p><span class="label label-blue">SCHEMA</span></p><p>
The global schema service at <a href="https://schema.folddb.com" target="_blank">schema.folddb.com</a> checks for existing compatible schemas or creates new ones.</p></div>

<div class="card"><p><span class="label label-blue">STORE</span></p><p>
Data is written as mutations with AES-256-GCM encryption at rest. Local keys or AWS KMS.</p></div>

<div class="card"><p><span class="label label-blue">INDEX</span></p><p>
AI extracts keywords and normalizes terms (dates, names, etc.) for search.</p></div>

<div class="card"><p><span class="label label-blue">QUERY</span></p><p>
Search with natural language or structured field queries. Schema-aware planning for efficient retrieval.</p></div>

<div class="card"><p><span class="label label-blue">PERMISSIONS</span></p><p>
Trust-based access control at the field level. Multi-tenant isolation enforced at the storage layer.</p></div>
</div>
</div>

<!-- CODE EXAMPLES -->
<div class="section-rose">
<h2 id="code"><span class="bold">CODE EXAMPLES</span> <span class="dim">HTTP API &amp; TypeScript</span></h2>

<p>Most integrations use the HTTP API at <span class="bold">localhost:9001</span>. All endpoints accept and return JSON.</p>
<p class="dim">Rust library API is also available for embedded use &mdash; see <a href="https://docs.rs/fold_db" target="_blank">docs.rs/fold_db</a>.</p>

<div class="grid-2">
<div class="card">
<p><span class="label label-red">HTTP &mdash; INGEST JSON</span></p>
<pre>curl -X POST http://localhost:9001/api/ingestion/process \
  -H "Content-Type: application/json" \
  -d '{
    "data": {
      "title": "Quarterly Report",
      "content": "Revenue grew 15% in Q3...",
      "author": "Jane Smith",
      "date": "2024-09-30"
    }
  }'</pre>
<p class="dim">AI determines schema, writes data, and indexes keywords in one call</p>
</div>

<div class="card">
<p><span class="label label-red">HTTP &mdash; QUERY DATA</span></p>
<pre>curl -X POST http://localhost:9001/api/query \
  -H "Content-Type: application/json" \
  -d '{
    "schema_name": "quarterly_report",
    "fields": ["title", "content", "author"]
  }'</pre>
<p class="dim">Structured query &mdash; returns all matching molecules</p>
</div>

<div class="card">
<p><span class="label label-red">HTTP &mdash; NATURAL LANGUAGE</span></p>
<pre>curl -X POST http://localhost:9001/api/llm-query/agent \
  -H "Content-Type: application/json" \
  -d '{
    "query": "What reports did Jane write?"
  }'</pre>
<p class="dim">AI agent plans and executes queries across all schemas</p>
</div>

<div class="card">
<p><span class="label label-red">HTTP &mdash; SEARCH INDEX</span></p>
<pre>curl "http://localhost:9001/api/native-index/search?term=revenue"</pre>
<p class="dim">Fast keyword search across all indexed data</p>
</div>

<div class="card">
<p><span class="label label-red">HTTP &mdash; UPLOAD FILE</span></p>
<pre>curl -X POST http://localhost:9001/api/ingestion/upload \
  -F "file=@report.pdf"</pre>
<p class="dim">Upload any file &mdash; AI extracts content, converts to JSON, and ingests</p>
</div>

<div class="card">
<p><span class="label label-red">TYPESCRIPT &mdash; FRONTEND CLIENTS</span></p>
<pre>import {
  schemaClient,
  securityClient,
  systemClient
} from "../api/clients";

// Schema operations with automatic caching
const response = await schemaClient.getSchemas();
if (response.success) {
  const schemas = response.data; // Fully typed
}

// System monitoring with 30-second cache
const status = await systemClient.getSystemStatus();</pre>
<p class="dim">Available clients: SchemaClient &middot; SecurityClient &middot; SystemClient &middot; TransformClient &middot; IngestionClient &middot; MutationClient</p>
</div>
</div>
</div>

<!-- REST API REFERENCE -->
<div class="section-lavender">
<h2 id="api"><span class="bold">REST API REFERENCE</span> <span class="dim">All endpoints at localhost:9001</span></h2>

<p>Full OpenAPI spec available at <a href="http://localhost:9001/api/openapi.json" target="_blank">localhost:9001/api/openapi.json</a> when the server is running.</p>

<div class="grid-2">
<div class="card">
<p><span class="label label-purple">SCHEMAS</span></p>
<pre class="compare-table">GET  /api/schemas                    List all schemas
GET  /api/schema/{name}              Get schema by name
GET  /api/schema/{name}/keys         List keys (paginated)
POST /api/schemas/load               Load from schema dirs
POST /api/schema/{name}/approve      Approve a schema
POST /api/schema/{name}/block        Block a schema
GET  /api/backfill/{hash}            Get backfill status</pre>
</div>

<div class="card">
<p><span class="label label-purple">INGESTION</span></p>
<pre class="compare-table">POST /api/ingestion/process          Ingest JSON data
POST /api/ingestion/upload           Upload a file
POST /api/ingestion/validate         Validate without ingesting
POST /api/ingestion/batch-folder     Batch ingest a folder
GET  /api/ingestion/status           Ingestion status
GET  /api/ingestion/config           Get ingestion config
POST /api/ingestion/config           Save ingestion config
GET  /api/ingestion/progress         All active progress
GET  /api/ingestion/progress/{id}    Progress by ID</pre>
</div>

<div class="card">
<p><span class="label label-purple">SMART FOLDER</span></p>
<pre class="compare-table">POST /api/ingestion/smart-folder/scan
                                     AI-classify files
POST /api/ingestion/smart-folder/ingest
                                     Ingest recommended
POST /api/ingestion/smart-folder/resume
                                     Resume a batch
POST /api/ingestion/smart-folder/cancel
                                     Cancel a batch
GET  /api/ingestion/batch/{batch_id}
                                     Batch status</pre>
</div>

<div class="card">
<p><span class="label label-purple">QUERY &amp; MUTATION</span></p>
<pre class="compare-table">POST /api/query                      Execute a query
POST /api/mutation                   Execute a mutation
POST /api/mutations/batch            Batch mutations
GET  /api/native-index/search        Keyword search (?term=)
GET  /api/indexing/status            Indexing status</pre>
</div>

<div class="card">
<p><span class="label label-purple">LLM QUERY</span></p>
<pre class="compare-table">POST /api/llm-query/agent            Agent-based NL query
POST /api/llm-query/analyze          Analyze a query
POST /api/llm-query/execute          Execute a query plan
POST /api/llm-query/chat             Chat endpoint
POST /api/llm-query/analyze-followup Follow-up analysis
GET  /api/llm-query/backfill/{hash}  Backfill status</pre>
</div>

<div class="card">
<p><span class="label label-purple">SYSTEM</span></p>
<pre class="compare-table">GET  /api/system/status              System health
GET  /api/system/public-key          Node public key
GET  /api/system/private-key         Node private key
GET  /api/system/database-config     Database config
POST /api/system/database-config     Update DB config
POST /api/system/reset-database      Reset database
POST /api/system/setup               Apply setup
POST /api/system/complete-path       Path completion
GET  /api/system/auto-identity       Auto-gen identity
GET  /api/openapi.json               OpenAPI spec</pre>
</div>
</div>
</div>

<!-- CLI REFERENCE -->
<div class="section-sage">
<h2 id="cli"><span class="bold">CLI REFERENCE</span> <span class="dim">folddb command line</span></h2>

<div class="grid-2">
<div class="card">
<p><span class="label label-green">STATUS &amp; SCHEMAS</span></p>
<pre>folddb status                          # Node health + config
folddb schema list                     # List all schemas
folddb schema get my_schema            # Inspect a schema
folddb schema approve my_schema        # Approve pending
folddb schema block my_schema          # Block a schema
folddb schema load                     # Load from schema dirs</pre>
</div>

<div class="card">
<p><span class="label label-green">INGEST</span></p>
<pre>folddb ingest file data.json           # Ingest a JSON file
folddb ingest file &lt; data.json         # Ingest from stdin
folddb ingest smart-scan ~/Documents   # AI-classify files
folddb ingest smart ~/Documents --all  # Scan + ingest all
folddb ingest smart ~/Documents \
  --files a.json,b.csv                 # Ingest specific files</pre>
</div>

<div class="card">
<p><span class="label label-green">QUERY &amp; SEARCH</span></p>
<pre>folddb query tweets --fields text,author
                                       # Structured query
folddb search "machine learning"       # Keyword search
folddb ask "recent purchases over $50"
                                       # Natural language (AI)</pre>
</div>

<div class="card">
<p><span class="label label-green">MUTATE</span></p>
<pre>folddb mutate run tweets \
  --type create \
  --fields '{"text":"hello"}'          # Single mutation
folddb mutate batch mutations.json     # Batch from file</pre>
</div>

<div class="card">
<p><span class="label label-green">SYSTEM</span></p>
<pre>folddb config show                     # Show config
folddb config path                     # Config file path
folddb reset --confirm                 # Reset database
folddb transform list                  # List transforms
folddb backfill stats                  # Backfill stats
folddb completions bash                # Shell completions</pre>
</div>

<div class="card">
<p><span class="label label-green">GLOBAL FLAGS</span></p>
<pre>folddb --json &lt;command&gt;                # JSON output
folddb -v &lt;command&gt;                    # Verbose output
folddb --config path/to/config.toml &lt;command&gt;
folddb --user-hash abc123 &lt;command&gt;
folddb --data-path /tmp/mydb &lt;command&gt;
folddb --schema-service-url http://... &lt;command&gt;</pre>
</div>
</div>
</div>

<!-- CONFIGURATION -->
<div class="section-amber">
<h2 id="config"><span class="bold">CONFIGURATION</span> <span class="dim">Environment variables</span></h2>

<pre class="compare-table">
VARIABLE                         PURPOSE
─────────────────────────────────────────────────────────────────
FOLD_OPENROUTER_API_KEY          API key for AI ingestion
FOLD_SCHEMA_SERVICE_URL          Schema service (default: schema.folddb.com)
FOLD_CONFIG                      Path to config file
FOLD_LOG_LEVEL                   trace | debug | info | warn | error
FOLD_STORAGE_MODE                Storage backend ("s3" for cloud)
FOLD_S3_BUCKET                   S3 bucket for database storage
FOLD_S3_REGION                   AWS region for S3
FOLD_UPLOAD_STORAGE_MODE         Upload storage ("s3" for cloud)
</pre>
</div>

<!-- SCHEMA REGISTRY -->
<div class="section-lavender">
<h2 id="schemas"><span class="bold">SCHEMA REGISTRY</span> <span class="dim">Live from schema.folddb.com</span></h2>

<p>Browse the global schema registry. Schemas define data structure, permissions, and topology for interoperability across nodes. During ingestion, AI checks this registry for compatible schemas before creating new ones.</p>

<p>
  <span class="bold" id="schemaCount">&mdash;</span> schemas
  <span class="dim">|</span>
  <span class="bold" id="totalFields">&mdash;</span> total fields
  <span class="dim">|</span>
  service: <span class="bold" id="serviceStatus">checking...</span>
</p>

<p>
  <button class="filter-btn active" data-filter="all">[All]</button>
  <button class="filter-btn" data-filter="Single">[Single]</button>
  <button class="filter-btn" data-filter="Range">[Range]</button>
  <button class="filter-btn" data-filter="HashRange">[HashRange]</button>
</p>

<div id="loadingContainer" class="dim"><p>Loading schemas from registry...</p></div>
<div id="errorContainer" style="display:none"><p>Failed to load schemas. <span class="link-btn" id="retryBtn" style="cursor:pointer">[Retry]</span></p></div>
<div id="emptyContainer" style="display:none"><p class="dim">No schemas found.</p></div>

<div id="schemasGrid" class="grid-3"></div>
</div>

<!-- SCHEMA DETAIL MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <p>
      <span class="bold" id="modalSchemaName">Schema Name</span>
      <span class="label label-purple" id="modalSchemaType">Single</span>
      <span class="link-btn" id="modalClose" style="cursor:pointer; float:right">[Close]</span>
    </p>
    <div id="modalBody"></div>
    <p>
      <span class="link-btn" id="copyJsonBtn" style="cursor:pointer">[Copy JSON]</span>
      <span class="link-btn" id="modalCloseBtn" style="cursor:pointer">[Close]</span>
    </p>
  </div>
</div>

<!-- CONTRIBUTING / DEV SETUP -->
<div class="section-sage">
<h2 id="contributing"><span class="bold">CONTRIBUTING</span> <span class="dim">Developer setup</span></h2>

<div class="grid-2">
<div class="card">
<p><span class="label label-green">LOCAL DEVELOPMENT</span></p>
<pre>git clone https://github.com/shiba4life/fold_db
cd fold_db
./run.sh --local                       # Backend + React UI</pre>
<p class="dim">Always use run.sh &mdash; never start services manually</p>
</div>

<div class="card">
<p><span class="label label-green">TESTING</span></p>
<pre>cargo test --lib                       # Rust unit tests
cargo test --bin folddb                 # CLI integration tests
cargo clippy                           # Lint (zero warnings)
cd src/server/static-react
npm test                               # Frontend tests
npm run lint                           # ESLint</pre>
</div>
</div>
</div>

<!-- DOCUMENTATION LINKS -->
<div class="section-slate">
<h2 id="docs"><span class="bold">DOCUMENTATION</span> <span class="dim">Deeper reading</span></h2>

<div class="grid-2">
<div class="card"><p><span class="label label-blue">API REFERENCE</span></p><p>
Complete Rust API docs on <a href="https://docs.rs/fold_db" target="_blank">docs.rs/fold_db</a></p></div>

<div class="card"><p><span class="label label-blue">INGESTION GUIDE</span></p><p>
AI-powered data ingestion &mdash; <a href="https://github.com/shiba4life/fold_db/blob/main/INGESTION_README.md" target="_blank">INGESTION_README.md</a></p></div>

<div class="card"><p><span class="label label-blue">AI QUERY GUIDE</span></p><p>
Natural language queries &mdash; <a href="https://github.com/shiba4life/fold_db/blob/main/docs/AI_QUERY_USAGE_GUIDE.md" target="_blank">AI_QUERY_USAGE_GUIDE.md</a></p></div>

<div class="card"><p><span class="label label-blue">ARCHITECTURE</span></p><p>
System design and patterns &mdash; <a href="https://github.com/shiba4life/fold_db/blob/main/docs/Unified_Architecture.md" target="_blank">Unified_Architecture.md</a></p></div>
</div>
</div>

<p class="dim">----------------------------------------------------------------------------------------------------------------------------------------</p>

<p><span class="bold white">folddb</span> <span class="dim">v0.1.0  Dual-licensed MIT / Apache 2.0</span><br>
<span class="dim">PROJECT</span>  <a href="https://github.com/shiba4life/fold_db" target="_blank">GitHub</a>  <a href="https://github.com/shiba4life/fold_db/blob/main/docs/GOAL.md" target="_blank">GOAL.md</a>  <a href="https://docs.rs/fold_db" target="_blank">docs.rs</a><br>
<span class="dim">LINKS</span>    <a href="https://schema.folddb.com" target="_blank">Schema Registry</a>  <a href="https://github.com/shiba4life/fold_db/issues" target="_blank">Issues</a>  <a href="https://github.com/shiba4life/fold_db/discussions" target="_blank">Discussions</a><br>
<span class="dim">&copy; 2025-2026 Fold DB &mdash; Built in the open</span></p>

</div>
<script src="logo-animation.js"></script>
<script src="developer.js"></script>
<script>initLogoAnimation(document.getElementById('logo'), 64);</script>
</body>
</html>
